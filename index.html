<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cryptarithm: SEND + MORE = MONEY</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --gradient-start: #6a11cb;
            --gradient-end: #2575fc;
            --text-light: #f0f0f0;
            --text-dark: #333;
            --input-bg: rgba(255, 255, 255, 0.1);
            --input-border: rgba(255, 255, 255, 0.3);
            --input-focus-border: #fff;
            --success-color: #2ecc71;
            --error-color: #e74c3c;
            --container-bg: rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            color: var(--text-light);
            overflow: hidden; /* Mencegah scroll saat ada confetti */
        }

        .container {
            background: var(--container-bg);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 500px;
            width: 90%;
            position: relative; /* Untuk positioning confetti */
            overflow: hidden; /* Agar confetti tidak keluar container */
        }

        h1 {
            margin-bottom: 15px;
            font-weight: 600;
            background: linear-gradient(90deg, #f0f0f0, #c0c0c0);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .puzzle {
            font-size: 1.8em;
            font-weight: 600;
            letter-spacing: 3px;
            margin-bottom: 30px;
            padding: 10px;
            background: linear-gradient(90deg, var(--gradient-end), var(--gradient-start));
            border-radius: 8px;
            display: inline-block;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .input-group label {
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-light);
        }

        .input-group input {
            width: 60px;
            height: 60px;
            text-align: center;
            font-size: 1.8em;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            background-color: var(--input-bg);
            border: 2px solid var(--input-border);
            border-radius: 10px;
            color: var(--text-light);
            transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
            outline: none;
            appearance: textfield; /* Hapus panah di input number */
            -moz-appearance: textfield; /* Hapus panah di Firefox */
        }
        /* Hapus panah di Chrome, Safari, Edge, Opera */
        .input-group input::-webkit-outer-spin-button,
        .input-group input::-webkit-inner-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }


        .input-group input:hover {
            border-color: rgba(255, 255, 255, 0.7);
            transform: translateY(-2px);
        }

        .input-group input:focus {
            border-color: var(--input-focus-border);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
            transform: translateY(0); /* Kembali ke posisi normal saat fokus */
        }

        #result {
            margin-top: 20px;
            font-size: 1.1em;
            font-weight: 600;
            min-height: 25px; /* Jaga ruang agar layout tidak bergeser */
            transition: color 0.3s ease;
        }

        #result.success {
            color: var(--success-color);
        }

        #result.error {
            color: var(--error-color);
        }

        /* Simple Win Animation (Confetti Placeholder) */
        .win-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5); /* Sedikit gelap */
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0s linear 0.5s;
            z-index: 10;
        }

        .win-overlay.show {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.5s ease, visibility 0s linear 0s;
        }

        .win-message {
            font-size: 3em;
            font-weight: 600;
            color: #fff;
            text-shadow: 0 0 15px var(--success-color);
            animation: celebratoryPop 0.8s ease-out forwards;
            transform: scale(0);
        }

        @keyframes celebratoryPop {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            60% { transform: scale(1.2) rotate(-5deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

         /* Efek Konfeti Sederhana dengan CSS */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00; /* Warna bisa bervariasi */
            opacity: 0.7;
            animation: fall 3s linear infinite;
            border-radius: 50%;
            pointer-events: none; /* Agar tidak menghalangi interaksi */
            z-index: 11; /* Di atas overlay */
        }

        @keyframes fall {
            0% { transform: translateY(-20px) rotateZ(0deg); opacity: 0.7; }
            100% { transform: translateY(100vh) rotateZ(720deg); opacity: 0; }
        }


    </style>
</head>
<body>
    <div class="container">
        <h1>Cryptarithm Puzzle</h1>
        <div class="puzzle">SEND + MORE = MONEY</div>

        <div class="input-grid">
            <div class="input-group">
                <label for="S">S</label>
                <input type="text" id="S" maxlength="1" pattern="[0-9]" inputmode="numeric">
            </div>
            <div class="input-group">
                <label for="E">E</label>
                <input type="text" id="E" maxlength="1" pattern="[0-9]" inputmode="numeric">
            </div>
            <div class="input-group">
                <label for="N">N</label>
                <input type="text" id="N" maxlength="1" pattern="[0-9]" inputmode="numeric">
            </div>
            <div class="input-group">
                <label for="D">D</label>
                <input type="text" id="D" maxlength="1" pattern="[0-9]" inputmode="numeric">
            </div>
            <div class="input-group">
                <label for="M">M</label>
                <input type="text" id="M" maxlength="1" pattern="[0-9]" inputmode="numeric">
            </div>
            <div class="input-group">
                <label for="O">O</label>
                <input type="text" id="O" maxlength="1" pattern="[0-9]" inputmode="numeric">
            </div>
            <div class="input-group">
                <label for="R">R</label>
                <input type="text" id="R" maxlength="1" pattern="[0-9]" inputmode="numeric">
            </div>
            <div class="input-group">
                <label for="Y">Y</label>
                <input type="text" id="Y" maxlength="1" pattern="[0-9]" inputmode="numeric">
            </div>
        </div>

        <div id="result">Masukkan angka unik (0-9) untuk setiap huruf.</div>

        <div class="win-overlay" id="win-overlay">
            <div class="win-message">BENAR! ðŸŽ‰</div>
            </div>
    </div>

    <script>
        const inputs = {
            S: document.getElementById('S'),
            E: document.getElementById('E'),
            N: document.getElementById('N'),
            D: document.getElementById('D'),
            M: document.getElementById('M'),
            O: document.getElementById('O'),
            R: document.getElementById('R'),
            Y: document.getElementById('Y')
        };
        const resultDiv = document.getElementById('result');
        const winOverlay = document.getElementById('win-overlay');
        const container = document.querySelector('.container'); // Untuk menempatkan konfeti

        const uniqueLetters = ['S', 'E', 'N', 'D', 'M', 'O', 'R', 'Y'];

        // Tambahkan event listener ke setiap input
        Object.values(inputs).forEach(input => {
            input.addEventListener('input', handleInput);
            // Tambahkan validasi agar hanya angka yang bisa dimasukkan
             input.addEventListener('keypress', function(event) {
                if (!/[0-9]/.test(event.key)) {
                    event.preventDefault();
                }
            });
             // Hapus karakter non-angka jika user paste
            input.addEventListener('paste', function(event) {
                event.preventDefault();
                const text = event.clipboardData.getData('text/plain');
                if (/^[0-9]$/.test(text)) {
                    input.value = text;
                    handleInput(); // Panggil validasi setelah paste
                }
            });
        });

        function handleInput() {
            // Batasi input ke satu digit
            this.value = this.value.slice(0, 1);
            validatePuzzle();
        }

        function validatePuzzle() {
            const values = {};
            let allFilled = true;
            const digitsUsed = new Set();
            let hasDuplicate = false;

            // Kumpulkan nilai dan cek duplikat
            for (const letter of uniqueLetters) {
                const value = inputs[letter].value;
                if (value === '' || isNaN(parseInt(value))) {
                    allFilled = false;
                    values[letter] = undefined; // Tandai sebagai belum terisi
                } else {
                    const digit = parseInt(value);
                    values[letter] = digit;
                    if (digitsUsed.has(digit)) {
                        hasDuplicate = true;
                    }
                    digitsUsed.add(digit);
                }
            }

            // Reset status visual
            resultDiv.textContent = 'Masukkan angka unik (0-9) untuk setiap huruf.';
            resultDiv.className = '';
            winOverlay.classList.remove('show');
             clearConfetti(); // Hapus konfeti lama jika ada

            // Validasi 1: Duplikat Angka
            if (hasDuplicate) {
                resultDiv.textContent = 'Error: Setiap huruf harus memiliki angka yang unik!';
                resultDiv.className = 'error';
                return; // Hentikan validasi lebih lanjut
            }

             // Validasi 2: Angka depan tidak boleh 0 (S dan M)
            if (values.S === 0 || values.M === 0) {
                if(values.S !== undefined && values.M !== undefined) { // Hanya tampilkan jika S atau M sudah diisi 0
                    resultDiv.textContent = 'Error: Huruf depan (S dan M) tidak boleh 0!';
                    resultDiv.className = 'error';
                    return;
                } else if (values.S === 0) {
                     resultDiv.textContent = 'Error: Huruf depan (S) tidak boleh 0!';
                     resultDiv.className = 'error';
                    return;
                } else if (values.M === 0) {
                    resultDiv.textContent = 'Error: Huruf depan (M) tidak boleh 0!';
                    resultDiv.className = 'error';
                    return;
                }
            }

            // Validasi 3: Cek persamaan jika semua terisi
            if (allFilled) {
                const S = values.S;
                const E = values.E;
                const N = values.N;
                const D = values.D;
                const M = values.M;
                const O = values.O;
                const R = values.R;
                const Y = values.Y;

                const send = S * 1000 + E * 100 + N * 10 + D;
                const more = M * 1000 + O * 100 + R * 10 + E;
                const money = M * 10000 + O * 1000 + N * 100 + E * 10 + Y;

                if (send + more === money) {
                    resultDiv.textContent = 'Benar! SEND + MORE = MONEY âœ…';
                    resultDiv.className = 'success';
                    winOverlay.classList.add('show');
                    createConfetti(); // Tampilkan konfeti
                } else {
                    resultDiv.textContent = 'Hampir benar! Cek kembali perhitungan Anda.';
                    resultDiv.className = 'error';
                }
            } else {
                 // Jika belum semua terisi tapi tidak ada error lain
                 if (!hasDuplicate && values.S !== 0 && values.M !== 0) {
                    resultDiv.textContent = 'Terus isi angka...';
                    resultDiv.className = '';
                 }
            }
        }

        // --- Fungsi Konfeti Sederhana ---
        let confettiInterval;

        function createConfetti() {
            clearConfetti(); // Hapus interval lama jika ada
            const confettiCount = 50; // Jumlah konfeti
            const colors = ['#f00', '#0f0', '#00f', '#ff0', '#f0f', '#0ff', '#fff'];

            for (let i = 0; i < confettiCount; i++) {
                const confettiElement = document.createElement('div');
                confettiElement.classList.add('confetti');
                confettiElement.style.left = Math.random() * 100 + '%'; // Posisi horizontal acak
                confettiElement.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                // Atur delay dan durasi animasi acak untuk variasi
                confettiElement.style.animationDuration = (Math.random() * 2 + 2) + 's'; // Durasi 2-4 detik
                confettiElement.style.animationDelay = Math.random() * 1 + 's'; // Delay hingga 1 detik
                confettiElement.style.opacity = Math.random() * 0.5 + 0.5; // Opasitas acak
                container.appendChild(confettiElement);

                 // Hapus elemen setelah animasi selesai
                 confettiElement.addEventListener('animationend', () => {
                    confettiElement.remove();
                });
            }
        }

        function clearConfetti() {
             const existingConfetti = container.querySelectorAll('.confetti');
             existingConfetti.forEach(c => c.remove());
        }

        // Panggil validasi saat halaman dimuat (untuk inisialisasi)
        validatePuzzle();

    </script>
</body>
</html>
